<script>
  $(() => {
    $("div.droptrue").sortable({
      connectWith: "div",
    });

  });
  $(() => {
    $(".draggable").draggable({
      drop: (event, ui) => {
        console.log('hiii')
      }
     });
    $(".droppable").droppable({
      drop: (event, ui) => {
        console.log($(this))
        if ($(event.target).attr('class').split(' ')[6] === 'taken') {
          const innerHtml = ui.draggable.html();
          ui.draggable.remove();
          const fullHtml = '<div ng-repeat="queen in queens track by $index" class="col-md-2 item ng-scope ui-sortable-handle">' + innerHtml + '</div>';
          $('#repeatQueen').append(fullHtml);
        }
        $(event.target).addClass('taken');
        ui.draggable.removeClass('col-md-2');
        ui.draggable.addClass('selected-drag-drop');
      },
    });
    $(".droppableHolder").droppable({
      drop: (event, ui) => {
        ui.draggable.addClass('col-md-2');
        ui.draggable.removeClass('selected-drag-drop')
        console.log(ui.draggable)
        $(event.target).removeClass('taken')
      },
    });
  });
</script>


<!-- <div ng-repeat="queen in queens track by $index" class="col-md-2 item ng-scope ui-sortable-handle">
      
          <a draggable="true" class="portfolio-item ui-state-default" style="background-image: url(img/Valentina.jpg);" href="">
            <div class="details">
              <h4 class="ng-binding">Valentina</h4>
              <span class="ng-binding">Los Angeles</span>
              <span class="ng-binding">25</span>
            </div>
          </a>
      </div> -->

<section id="portfolio">
  <div class="container wow fadeInUp">
    <div class="row">
      <div class="col-md-12">
        <h3 class="section-title">Select your Queens</h3>
        <div class="section-title-divider"></div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12">
        <p class="section-description">Drag your selections to each catageory and then submit before the episode airs!</p>
      </div>

      

      <div class="col-md-3  subscribe-btn-container">
        <p href="#">Winner</p>
        <div class="dropBox droptrue droppable portfolio-item "></div>
        <select ng-model="selection.winner" ng-options='queen.name for queen in queens'></select>
      </div>

      <div class="col-md-3  subscribe-btn-container">
        <p href="#">Runner-Up</p>
        <div class="dropBox droptrue droppable portfolio-item "></div>
      <select ng-model="selection.runnerUp" ng-options='queen.name for queen in queens'></select>
      </div>

      <div class="col-md-3  subscribe-btn-container">
        <p href="#">Bottom</p>
        <div class="dropBox droptrue droppable portfolio-item "></div>
        <select ng-model="selection.bottom" ng-options='queen.name for queen in queens'></select>
      </div>

      <div class="col-md-3 subscribe-btn-container">
        <p href="#">Eliminated</p>
        <div class="dropBox droptrue droppable portfolio-item "></div>
        <select ng-model="selection.eliminated" ng-options='queen.name for queen in queens'></select>
      </div>


</div>

    <div id="repeatQueen"class="horizontal-slide droptrue droppableHolder draggable">
      <div ng-repeat="queen in queens track by $index" class="col-md-2 item">
      
          <a draggable="true" class="portfolio-item ui-state-default" style="background-image: url(img/{{queen.name.split(' ')[0]}}.jpg);" href="">
            <div class="details">
              <h4>{{queen.name}}</h4>
              <span>{{queen.hometown}}</span>
              <span>{{queen.age}}</span>
            </div>
          </a>
      </div>
    </div>
    
    <div class="col-md-12 subscribe-btn-container">
      <a  href="#" ng-click="submitSelection(selection)">Submit</a>
    </div>



  </div>
</section>
